width = 9, height = 4, device='pdf', dpi=600)
df %>%
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
select(journalTitle,
pubYear,
Findability_level:Reusability_level) %>%
pivot_longer(Findability_level:Reusability_level,
names_to = "item",
values_to = "value") %>%
mutate(value = fct_relevel(value, "incomplete", "initial",
"moderate", "advanced")) %>%
mutate(
item = fct_relevel(
item,
"Findability_level", "Accesibility_level",
"Interoperability_level", "Reusability_level"
)) %>%
mutate(item = fct_recode(item,
"Findability" = "Findability_level",
"Accesibility" = "Accesibility_level",
"Interoperability" = "Interoperability_level",
"Reusability" = "Reusability_level")) %>%
# table for check
# select(item, value) %>%
# gtsummary::tbl_summary(by = item)
group_by(item, value)  %>%
count() %>%
ggplot(aes(x = item,
y = n,
fill = forcats::fct_rev(value))) +
# geom_col() +
geom_bar(position = "fill", stat = "identity") +
# geom_col(position = position_stack(reverse = TRUE)) +
scale_x_discrete(limits = rev) +
# scale_fill_discrete(limits = rev) +
scale_fill_manual(values = c( "#51B364", "#8ACE7E", "#FFDA66", "#E03531" )) +
# scale_fill_brewer(palette = "RdYiGn") +
labs(title = "Summary of FAIR levels by metric",
fill = "FAIR Level",
x = "FAIR Metric",
y = "") +
coord_flip() +
scale_y_continuous(labels = scales::percent_format())
ggsave(path = here("Figs"),
filename = "Fig1_fair_levels_by_metric.pdf",
width = 5, height = 5, device='pdf', dpi=600)
+
p1 + p2 + plot_annotation(tag_levels = 'A')
p1 + p2 + plot_annotation(tag_levels = 'A')
ggsave(path = here("Figs"),
filename = "Fig2_year_journal.pdf",
width = 9, height = 4, device='pdf', dpi=600)
df %>%
# reoirder and relabel the data
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
pivot_longer(FsF_F1_01D:FsF_R1.3_02D,
names_to = "item",
values_to = "value") %>%
mutate(item = fct_inorder(item)) %>%
mutate(value = as.character(value)) %>%
mutate(value = fct_recode(
value,
"Incomplete" = "0",
"Initial"    = "1" ,
"Moderate"   = "2",
"Advanced"   = "3"
)) %>%
mutate(value = fct_relevel(value,
"Incomplete",
"Initial",
"Moderate",
"Advanced"))  %>%
#########################
# relevel
mutate(
item = fct_recode(
item,
"F1-01D - Data is assigned a globally unique identifier" = "FsF_F1_01D"	,
"F1-02D - Data is assigned a persistent identifier" = "FsF_F1_02D"	,
"F2-01M - Metadata includes descriptive core elements to support data findability" = "FsF_F2_01M"	,
"F3-01M - Metadata includes the identifier of the data it describes" = "FsF_F3_01M"	,
"F4-01M - Metadata is offered in such a way that it can be retrieved by machines" = "FsF_F4_01M"	,
"A1-01M - Metadata contains access level and access conditions of the data" = "FsF_A1_01M"	,
"A1-02M - Metadata is accessible through a standardized communication protocol" = "FsF_A1_03D"	,
"A1-03D - Data is accessible through a standardized communication protocol" = "FsF_A1_02M"	,
"I1-01M - Metadata is represented using a formal knowledge representation language" = "FsF_I1_01M"	,
"I1-02M - Metadata uses semantic resources" = "FsF_I1_02M"	,
"I3-01M - Metadata includes links between the data and its related entities" = "FsF_I3_01M"	,
"R1-01MD - Metadata specifies the content of the data" = "FsF_R1_01MD"	,
"R1.1-01M - Metadata includes license information under which data can be reused" = "FsF_R1.1_01M"	,
"R1.2-01M - Metadata includes provenance information about data creation or generation" = "FsF_R1.2_01M"	,
"R1.3-01M - Metadata follows a standard recommended by the target research community of the data" = "FsF_R1.3_01M"	,
"R1.3-02D - Data is available in a file format recommended by the target research community" = "FsF_R1.3_02D"
)
) %>%
#########################
select(item, value) %>%
group_by(item, value) %>%
count() %>%
## The plot
ggplot(aes(
x = item,
y = n,
fill = forcats::fct_rev(value)
)) +
# geom_col() +
geom_bar(position = "fill", stat = "identity") +
# geom_col(position = position_stack(reverse = TRUE)) +
scale_x_discrete(limits = rev) +
# scale_fill_discrete(limits = rev) +
scale_fill_manual(values = c("#51B364", "#8ACE7E", "#FFDA66", "#E03531")) +
# scale_fill_brewer(palette = "RdYiGn") +
labs(title = "Summary of FAIR levels by Year",
fill = "FAIR Level",
x = "FAIR Maturity Indicator",
y = "") +
# coord_flip() +
# facet_grid(. ~ item ) +
coord_flip() +
scale_y_continuous(labels = scales::percent_format())
ggsave(path = here("Figs"),
filename = "Fig3_fair_maturity.pdf",
width = 7, height = 5, device='pdf', dpi=300)
ggsave(path = here("Figs"),
filename = "Fig3_fair_maturity.pdf",
width = 12, height = 4, device='pdf', dpi=300)
ggsave(path = here("Figs"),
filename = "Fig3_fair_maturity.pdf",
width = 10, height = 5, device='pdf', dpi=300)
gitcreds::gitcreds_set()
df %>%
# reoirder and relabel the data
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
pivot_longer(FsF_F1_01D:FsF_R1.3_02D,
names_to = "item",
values_to = "value") %>%
mutate(item = fct_inorder(item)) %>%
mutate(value = as.character(value)) %>%
mutate(value = fct_recode(
value,
"Incomplete" = "0",
"Initial"    = "1" ,
"Moderate"   = "2",
"Advanced"   = "3"
)) %>%
mutate(value = fct_relevel(value,
"Incomplete",
"Initial",
"Moderate",
"Advanced"))  %>%
#########################
## recode for the table
mutate(value = fct_collapse(value,
adv_mod = c("Advanced", "Moderate"),
low_inc = "Init_inc")) %>%
# relevel
mutate(
item = fct_recode(
item,
"F1-01D - Data is assigned a globally unique identifier" = "FsF_F1_01D"	,
"F1-02D - Data is assigned a persistent identifier" = "FsF_F1_02D"	,
"F2-01M - Metadata includes descriptive core elements to support data findability" = "FsF_F2_01M"	,
"F3-01M - Metadata includes the identifier of the data it describes" = "FsF_F3_01M"	,
"F4-01M - Metadata is offered in such a way that it can be retrieved by machines" = "FsF_F4_01M"	,
"A1-01M - Metadata contains access level and access conditions of the data" = "FsF_A1_01M"	,
"A1-02M - Metadata is accessible through a standardized communication protocol" = "FsF_A1_03D"	,
"A1-03D - Data is accessible through a standardized communication protocol" = "FsF_A1_02M"	,
"I1-01M - Metadata is represented using a formal knowledge representation language" = "FsF_I1_01M"	,
"I1-02M - Metadata uses semantic resources" = "FsF_I1_02M"	,
"I3-01M - Metadata includes links between the data and its related entities" = "FsF_I3_01M"	,
"R1-01MD - Metadata specifies the content of the data" = "FsF_R1_01MD"	,
"R1.1-01M - Metadata includes license information under which data can be reused" = "FsF_R1.1_01M"	,
"R1.2-01M - Metadata includes provenance information about data creation or generation" = "FsF_R1.2_01M"	,
"R1.3-01M - Metadata follows a standard recommended by the target research community of the data" = "FsF_R1.3_01M"	,
"R1.3-02D - Data is available in a file format recommended by the target research community" = "FsF_R1.3_02D"
)
) %>%
#########################
select(item, value) %>%
group_by(item, value) %>%
count()  %>%
mutate(n = n/112*100) %>%
pivot_wider(names_from = value,
values_from = n) %>%
arrange(-desc(adv_mod))
df %>%
select(pubYear, true_open_data) %>%
group_by(pubYear, true_open_data) %>%
count()
df %>%
select(pubYear, true_open_data) %>%
group_by(pubYear, true_open_data) %>%
count() %>%
ggplot(aes(x = pubYear,
y = n,
color = true_open_data,
group = true_open_data)) +
geom_line()
df %>%
filter(pubYear < 2022) %>%
select(pubYear, true_open_data) %>%
group_by(pubYear, true_open_data) %>%
count() %>%
ggplot(aes(x = pubYear,
y = n,
color = true_open_data,
group = true_open_data)) +
geom_line()
df %>%
filter(pubYear < 2022) %>%
select(pubYear, true_open_data) %>%
group_by(pubYear, true_open_data) %>%
count() %>%
ggplot(aes(x = pubYear,
y = n,
color = true_open_data,
group = true_open_data)) +
geom_line() +
scale_y_log10()
df %>%
filter(pubYear < 2022) %>%
select(pubYear, true_open_data) %>%
group_by(pubYear, true_open_data) %>%
count() %>%
ggplot(aes(x = pubYear,
y = n,
color = true_open_data,
group = true_open_data)) +
geom_line()
df %>%
# reoirder and relabel the data
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
pivot_longer(FsF_F1_01D:FsF_R1.3_02D,
names_to = "item",
values_to = "value") %>%
mutate(item = fct_inorder(item)) %>%
mutate(value = as.character(value)) %>%
mutate(value = fct_recode(
value,
"Incomplete" = "0",
"Initial"    = "1" ,
"Moderate"   = "2",
"Advanced"   = "3"
)) %>%
mutate(value = fct_relevel(value,
"Incomplete",
"Initial",
"Moderate",
"Advanced"))  %>%
#########################
## recode for the table
mutate(value = fct_collapse(value,
adv_mod = c("Advanced", "Moderate"),
low_inc = "Init_inc")) %>%
# relevel
mutate(
item = fct_recode(
item,
"F1-01D - Data is assigned a globally unique identifier" = "FsF_F1_01D"	,
"F1-02D - Data is assigned a persistent identifier" = "FsF_F1_02D"	,
"F2-01M - Metadata includes descriptive core elements to support data findability" = "FsF_F2_01M"	,
"F3-01M - Metadata includes the identifier of the data it describes" = "FsF_F3_01M"	,
"F4-01M - Metadata is offered in such a way that it can be retrieved by machines" = "FsF_F4_01M"	,
"A1-01M - Metadata contains access level and access conditions of the data" = "FsF_A1_01M"	,
"A1-02M - Metadata is accessible through a standardized communication protocol" = "FsF_A1_03D"	,
"A1-03D - Data is accessible through a standardized communication protocol" = "FsF_A1_02M"	,
"I1-01M - Metadata is represented using a formal knowledge representation language" = "FsF_I1_01M"	,
"I1-02M - Metadata uses semantic resources" = "FsF_I1_02M"	,
"I3-01M - Metadata includes links between the data and its related entities" = "FsF_I3_01M"	,
"R1-01MD - Metadata specifies the content of the data" = "FsF_R1_01MD"	,
"R1.1-01M - Metadata includes license information under which data can be reused" = "FsF_R1.1_01M"	,
"R1.2-01M - Metadata includes provenance information about data creation or generation" = "FsF_R1.2_01M"	,
"R1.3-01M - Metadata follows a standard recommended by the target research community of the data" = "FsF_R1.3_01M"	,
"R1.3-02D - Data is available in a file format recommended by the target research community" = "FsF_R1.3_02D"
)
) %>%
#########################
select(item, value) %>%
group_by(item, value) %>%
count()  %>%
mutate(n = n/112*100) %>%
pivot_wider(names_from = value,
values_from = n)
df %>%
# reoirder and relabel the data
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
pivot_longer(FsF_F1_01D:FsF_R1.3_02D,
names_to = "item",
values_to = "value") %>%
mutate(item = fct_inorder(item)) %>%
mutate(value = as.character(value)) %>%
mutate(value = fct_recode(
value,
"Incomplete" = "0",
"Initial"    = "1" ,
"Moderate"   = "2",
"Advanced"   = "3"
)) %>%
mutate(value = fct_relevel(value,
"Incomplete",
"Initial",
"Moderate",
"Advanced"))  %>%
#########################
## recode for the table
mutate(value = fct_collapse(value,
adv_mod = c("Advanced", "Moderate"),
low_inc = "Init_inc")) %>%
# relevel
mutate(
item = fct_recode(
item,
"F1-01D - Data is assigned a globally unique identifier" = "FsF_F1_01D"	,
"F1-02D - Data is assigned a persistent identifier" = "FsF_F1_02D"	,
"F2-01M - Metadata includes descriptive core elements to support data findability" = "FsF_F2_01M"	,
"F3-01M - Metadata includes the identifier of the data it describes" = "FsF_F3_01M"	,
"F4-01M - Metadata is offered in such a way that it can be retrieved by machines" = "FsF_F4_01M"	,
"A1-01M - Metadata contains access level and access conditions of the data" = "FsF_A1_01M"	,
"A1-02M - Metadata is accessible through a standardized communication protocol" = "FsF_A1_03D"	,
"A1-03D - Data is accessible through a standardized communication protocol" = "FsF_A1_02M"	,
"I1-01M - Metadata is represented using a formal knowledge representation language" = "FsF_I1_01M"	,
"I1-02M - Metadata uses semantic resources" = "FsF_I1_02M"	,
"I3-01M - Metadata includes links between the data and its related entities" = "FsF_I3_01M"	,
"R1-01MD - Metadata specifies the content of the data" = "FsF_R1_01MD"	,
"R1.1-01M - Metadata includes license information under which data can be reused" = "FsF_R1.1_01M"	,
"R1.2-01M - Metadata includes provenance information about data creation or generation" = "FsF_R1.2_01M"	,
"R1.3-01M - Metadata follows a standard recommended by the target research community of the data" = "FsF_R1.3_01M"	,
"R1.3-02D - Data is available in a file format recommended by the target research community" = "FsF_R1.3_02D"
)
) %>%
#########################
select(item, value) %>%
group_by(item, value) %>%
count()  %>%
mutate(n = n/112*100) %>%
pivot_wider(names_from = value,
values_from = n) %>%
filter(item %in% c("F4-01M"))
select(filter(item,name=='F4-01M'| name=='F4-01M')
select(filter(item,name=='F4-01M'| name=='F4-01M')
df %>%
# reoirder and relabel the data
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
pivot_longer(FsF_F1_01D:FsF_R1.3_02D,
names_to = "item",
values_to = "value") %>%
mutate(item = fct_inorder(item)) %>%
mutate(value = as.character(value)) %>%
mutate(value = fct_recode(
value,
"Incomplete" = "0",
"Initial"    = "1" ,
"Moderate"   = "2",
"Advanced"   = "3"
)) %>%
mutate(value = fct_relevel(value,
"Incomplete",
"Initial",
"Moderate",
"Advanced"))  %>%
#########################
## recode for the table
mutate(value = fct_collapse(value,
adv_mod = c("Advanced", "Moderate"),
low_inc = "Init_inc")) %>%
# relevel
mutate(
item = fct_recode(
item,
"F1-01D - Data is assigned a globally unique identifier" = "FsF_F1_01D"	,
"F1-02D - Data is assigned a persistent identifier" = "FsF_F1_02D"	,
"F2-01M - Metadata includes descriptive core elements to support data findability" = "FsF_F2_01M"	,
"F3-01M - Metadata includes the identifier of the data it describes" = "FsF_F3_01M"	,
"F4-01M - Metadata is offered in such a way that it can be retrieved by machines" = "FsF_F4_01M"	,
"A1-01M - Metadata contains access level and access conditions of the data" = "FsF_A1_01M"	,
"A1-02M - Metadata is accessible through a standardized communication protocol" = "FsF_A1_03D"	,
"A1-03D - Data is accessible through a standardized communication protocol" = "FsF_A1_02M"	,
"I1-01M - Metadata is represented using a formal knowledge representation language" = "FsF_I1_01M"	,
"I1-02M - Metadata uses semantic resources" = "FsF_I1_02M"	,
"I3-01M - Metadata includes links between the data and its related entities" = "FsF_I3_01M"	,
"R1-01MD - Metadata specifies the content of the data" = "FsF_R1_01MD"	,
"R1.1-01M - Metadata includes license information under which data can be reused" = "FsF_R1.1_01M"	,
"R1.2-01M - Metadata includes provenance information about data creation or generation" = "FsF_R1.2_01M"	,
"R1.3-01M - Metadata follows a standard recommended by the target research community of the data" = "FsF_R1.3_01M"	,
"R1.3-02D - Data is available in a file format recommended by the target research community" = "FsF_R1.3_02D"
)
) %>%
#########################
select(item, value) %>%
group_by(item, value) %>%
count()  %>%
mutate(n = n/112*100) %>%
pivot_wider(names_from = value,
values_from = n) %>%
select(filter(item,name=='F4-01M'| name=='F4-01M'))
df %>%
# reoirder and relabel the data
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
pivot_longer(FsF_F1_01D:FsF_R1.3_02D,
names_to = "item",
values_to = "value") %>%
mutate(item = fct_inorder(item)) %>%
mutate(value = as.character(value)) %>%
mutate(value = fct_recode(
value,
"Incomplete" = "0",
"Initial"    = "1" ,
"Moderate"   = "2",
"Advanced"   = "3"
)) %>%
mutate(value = fct_relevel(value,
"Incomplete",
"Initial",
"Moderate",
"Advanced"))  %>%
#########################
## recode for the table
mutate(value = fct_collapse(value,
adv_mod = c("Advanced", "Moderate"),
low_inc = "Init_inc")) %>%
# relevel
mutate(
item = fct_recode(
item,
"F1-01D - Data is assigned a globally unique identifier" = "FsF_F1_01D"	,
"F1-02D - Data is assigned a persistent identifier" = "FsF_F1_02D"	,
"F2-01M - Metadata includes descriptive core elements to support data findability" = "FsF_F2_01M"	,
"F3-01M - Metadata includes the identifier of the data it describes" = "FsF_F3_01M"	,
"F4-01M - Metadata is offered in such a way that it can be retrieved by machines" = "FsF_F4_01M"	,
"A1-01M - Metadata contains access level and access conditions of the data" = "FsF_A1_01M"	,
"A1-02M - Metadata is accessible through a standardized communication protocol" = "FsF_A1_03D"	,
"A1-03D - Data is accessible through a standardized communication protocol" = "FsF_A1_02M"	,
"I1-01M - Metadata is represented using a formal knowledge representation language" = "FsF_I1_01M"	,
"I1-02M - Metadata uses semantic resources" = "FsF_I1_02M"	,
"I3-01M - Metadata includes links between the data and its related entities" = "FsF_I3_01M"	,
"R1-01MD - Metadata specifies the content of the data" = "FsF_R1_01MD"	,
"R1.1-01M - Metadata includes license information under which data can be reused" = "FsF_R1.1_01M"	,
"R1.2-01M - Metadata includes provenance information about data creation or generation" = "FsF_R1.2_01M"	,
"R1.3-01M - Metadata follows a standard recommended by the target research community of the data" = "FsF_R1.3_01M"	,
"R1.3-02D - Data is available in a file format recommended by the target research community" = "FsF_R1.3_02D"
)
) %>%
#########################
select(item, value) %>%
group_by(item, value) %>%
count()  %>%
mutate(n = n/112*100) %>%
pivot_wider(names_from = value,
values_from = n) %>%
select(filter(name=='F4-01M'| name=='F4-01M'))
df %>%
# reoirder and relabel the data
filter(true_open_data == "Yes") %>%
mutate(journalTitle = fct_lump_min(journalTitle, min = 3)) %>%
pivot_longer(FsF_F1_01D:FsF_R1.3_02D,
names_to = "item",
values_to = "value") %>%
mutate(item = fct_inorder(item)) %>%
mutate(value = as.character(value)) %>%
mutate(value = fct_recode(
value,
"Incomplete" = "0",
"Initial"    = "1" ,
"Moderate"   = "2",
"Advanced"   = "3"
)) %>%
mutate(value = fct_relevel(value,
"Incomplete",
"Initial",
"Moderate",
"Advanced"))  %>%
#########################
## recode for the table
mutate(value = fct_collapse(value,
adv_mod = c("Advanced", "Moderate"),
low_inc = "Init_inc")) %>%
# relevel
mutate(
item = fct_recode(
item,
"F1-01D - Data is assigned a globally unique identifier" = "FsF_F1_01D"	,
"F1-02D - Data is assigned a persistent identifier" = "FsF_F1_02D"	,
"F2-01M - Metadata includes descriptive core elements to support data findability" = "FsF_F2_01M"	,
"F3-01M - Metadata includes the identifier of the data it describes" = "FsF_F3_01M"	,
"F4-01M - Metadata is offered in such a way that it can be retrieved by machines" = "FsF_F4_01M"	,
"A1-01M - Metadata contains access level and access conditions of the data" = "FsF_A1_01M"	,
"A1-02M - Metadata is accessible through a standardized communication protocol" = "FsF_A1_03D"	,
"A1-03D - Data is accessible through a standardized communication protocol" = "FsF_A1_02M"	,
"I1-01M - Metadata is represented using a formal knowledge representation language" = "FsF_I1_01M"	,
"I1-02M - Metadata uses semantic resources" = "FsF_I1_02M"	,
"I3-01M - Metadata includes links between the data and its related entities" = "FsF_I3_01M"	,
"R1-01MD - Metadata specifies the content of the data" = "FsF_R1_01MD"	,
"R1.1-01M - Metadata includes license information under which data can be reused" = "FsF_R1.1_01M"	,
"R1.2-01M - Metadata includes provenance information about data creation or generation" = "FsF_R1.2_01M"	,
"R1.3-01M - Metadata follows a standard recommended by the target research community of the data" = "FsF_R1.3_01M"	,
"R1.3-02D - Data is available in a file format recommended by the target research community" = "FsF_R1.3_02D"
)
) %>%
#########################
select(item, value) %>%
group_by(item, value) %>%
count()  %>%
mutate(n = n/112*100) %>%
pivot_wider(names_from = value,
values_from = n)
